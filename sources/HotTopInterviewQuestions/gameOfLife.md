### 题目：

根据[百度百科](https://baike.baidu.com/item/%E7%94%9F%E5%91%BD%E6%B8%B8%E6%88%8F/2926434?fr=aladdin)，生命游戏，简称为生命，是英国数学家约翰·何顿·康威在1970年发明的细胞自动机。

给定一个包含 m × n 个格子的面板，每一个格子都可以看成是一个细胞。每个细胞具有一个初始状态 live（1）即为活细胞， 或 dead（0）即为死细胞。每个细胞与其八个相邻位置（水平，垂直，对角线）的细胞都遵循以下四条生存定律：

**如果活细胞周围八个位置的活细胞数少于两个，则该位置活细胞死亡；**
**如果活细胞周围八个位置有两个或三个活细胞，则该位置活细胞仍然存活；**
**如果活细胞周围八个位置有超过三个活细胞，则该位置活细胞死亡；**
**如果死细胞周围正好有三个活细胞，则该位置死细胞复活；**
根据当前状态，写一个函数来计算面板上细胞的下一个（一次更新后的）状态。下一个状态是通过将上述规则同时应用于当前状态下的每个细胞所形成的，其中细胞的出生和死亡是同时发生的。

```
示例:

输入: 
[
  [0,1,0],
  [0,0,1],
  [1,1,1],
  [0,0,0]
]
输出: 
[
  [0,0,0],
  [1,0,1],
  [0,1,1],
  [0,1,0]
]
```

进阶:  

你可以使用原地算法解决本题吗？请注意，面板上所有格子需要同时被更新：你不能先更新某些格子，然后使用它们的更新后的值再更新其他格子。 
本题中，我们使用二维数组来表示面板。原则上，面板是无限的，但当活细胞侵占了面板边界时会造成问题。你将如何解决这些问题？  

### 解法一：

使用数组保存改变之前的状态，然后根据规则改变结果数组。

```swift
 //1.如果活细胞周围八个位置的活细胞数少于两个，则该位置活细胞死亡；
 //2.如果活细胞周围八个位置有两个或三个活细胞，则该位置活细胞仍然存活；
 //3.如果活细胞周围八个位置有超过三个活细胞，则该位置活细胞死亡；
 //4.如果死细胞周围正好有三个活细胞，则该位置死细胞复活；
 class Solution {
    func gameOfLife(_ board: inout [[Int]]) {
        var tmp = board
        for i in 0..<tmp.count {
            for j in 0..<tmp[i].count {
                var item = tmp[i][j]
                var liveCellCount = 0

                for k in i-1...i+1 {
                    if k < 0 || k >= tmp.count {
                        continue
                    }
                    for l in j-1...j+1 {
                        if l < 0 || l >= tmp[i].count {
                            continue
                        }
                        if k == i, l == j {
                            continue
                        }
                        liveCellCount = tmp[k][l] == 1 ? liveCellCount + 1 : liveCellCount
                    }
                }
                if item == 1, (liveCellCount < 2 || liveCellCount > 3) {
                    item = 0
                } else if item == 0, liveCellCount == 3{
                    item = 1
                }
                board[i][j] = item
            }
        }
    }
 }
```

### 解法二：

进阶原地法。因为所有的细胞的状态需要同时更新，也就是不能一个接着一个更新，主要原因是，一个细胞的状态更新会影响到该细胞周围的八个细胞，而周围的细胞又会进而影响其他细胞，引起连锁反应。如果原地修改，不实用辅助数组，则需要避免连锁反应，怎么避免呢？先来整理一下已知的条件：

```
活细胞： 以1表示
死细胞：以0表示

活细胞：
1.周围活细胞<2或者>3，活细胞死亡，状态变成0
2.其他活细胞状态不变

死细胞：
1.周围活细胞=3，死细胞复活，状态变成1
2.其他死细胞状态不变
```

不管活细胞还是死细胞，只有细胞的状态改变的时候才会影响到其他细胞，所以，可以只考虑状态改变的情况。活细胞死亡，状态变成0，会影响到周围的细胞，那么，如果状态改变不影响到其他细胞，也就是活细胞死亡和活细胞状态不变，如果可以归一同一条件判断，也就不会相应到周围的细胞状态了。因为活细胞以1表示，那么，活细胞死亡可以用正整数表示，比如2，细胞是活的就可以用>0来表示了；同理，死细胞复活，也可以使用负整数表示，比如-1，细胞是死的就可以用<=0来表示了。当然，最后还需要把=2的细胞状态改变成0，=-1的细胞状态改变成1。这样就可以实现只修改原数组而不使用辅助数据解决问题了。

```swift
 //1.如果活细胞周围八个位置的活细胞数少于两个，则该位置活细胞死亡；
 //2.如果活细胞周围八个位置有两个或三个活细胞，则该位置活细胞仍然存活；
 //3.如果活细胞周围八个位置有超过三个活细胞，则该位置活细胞死亡；
 //4.如果死细胞周围正好有三个活细胞，则该位置死细胞复活；
 class Solution {
    func gameOfLife(_ board: inout [[Int]]) {
        for i in 0..<board.count {
            for j in 0..<board[i].count {
                var item = board[i][j]
                var liveCellCount = 0
                
                for k in i-1...i+1 {
                    if k < 0 || k >= board.count {
                        continue
                    }
                    for l in j-1...j+1 {
                        if l < 0 || l >= board[i].count {
                            continue
                        }
                        if k == i, l == j {
                            continue
                        }
                        liveCellCount = board[k][l] > 0 ? liveCellCount + 1 : liveCellCount
                    }
                }
                if item > 0, (liveCellCount < 2 || liveCellCount > 3) {
                    item = 2
                } else if item <= 0, liveCellCount == 3{
                    item = -1
                }
                board[i][j] = item
            }
        }
        for i in 0..<board.count {
            for j in 0..<board[i].count {
                if board[i][j] == 2 {
                    board[i][j] = 0
                } else if board[i][j] == -1 {
                    board[i][j] = 0
                }
            }
        }
    }
 }
```
